import { readFileSync } from 'fs';
import { fileURLToPath } from 'url';
import { dirname } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);
const array1 = JSON.parse(readFileSync('./code/Contacts/countryPhoneCodes.json', 'utf8'));

export const validateNumberWithCountryCode = (Number) => {
    let countryCodeP =   array1.find(element => Number.startsWith(element.code));
// console.log("the contact number starts with a possible country code", countryCodeP);
    let res = (String(Number) || Number || '')
    .replace(/[^\d]/g, '')
    .replace(/^0+|(?<=971)0+/g, "")
    if (res.length > 5 
        && !res.startsWith('93')
        && !res.startsWith('355')
        && !res.startsWith('213')
        && !res.startsWith('1684')
        && !res.startsWith('376')
        && !res.startsWith('244')
        && !res.startsWith('1264')
        && !res.startsWith('672')
        && !res.startsWith('1268')
        && !res.startsWith('54')
        && !res.startsWith('374')
        && !res.startsWith('297')
        && !res.startsWith('61')
        && !res.startsWith('43')
        && !res.startsWith('994')
        && !res.startsWith('1242')
        && !res.startsWith('973')
        && !res.startsWith('880')
        && !res.startsWith('1246')
        && !res.startsWith('375')
        && !res.startsWith('32')
        && !res.startsWith('501')
        && !res.startsWith('229')
        && !res.startsWith('1441')
        && !res.startsWith('975')
        && !res.startsWith('591')
        && !res.startsWith('387')
        && !res.startsWith('267')
        && !res.startsWith('55')
        && !res.startsWith('246')
        && !res.startsWith('1284')
        && !res.startsWith('673')
        && !res.startsWith('359')
        && !res.startsWith('226')
        && !res.startsWith('257')
        && !res.startsWith('855')
        && !res.startsWith('237')
        && !res.startsWith('1')
        && !res.startsWith('238')
        && !res.startsWith('1345')
        && !res.startsWith('236')
        && !res.startsWith('235')
        && !res.startsWith('56')
        && !res.startsWith('86')
        && !res.startsWith('61')
        && !res.startsWith('57')
        && !res.startsWith('269')
        && !res.startsWith('682')
        && !res.startsWith('506')
        && !res.startsWith('385')
        && !res.startsWith('53')
        && !res.startsWith('599')
        && !res.startsWith('357')
        && !res.startsWith('420')
        && !res.startsWith('243')
        && !res.startsWith('45')
        && !res.startsWith('253')
        && !res.startsWith('1767')
        && !res.startsWith('1809')
        && !res.startsWith('1829')
        && !res.startsWith('1849')
        && !res.startsWith('670')
        && !res.startsWith('593')
        && !res.startsWith('20')
        && !res.startsWith('503')
        && !res.startsWith('240')
        && !res.startsWith('291')
        && !res.startsWith('372')
        && !res.startsWith('251')
        && !res.startsWith('500')
        && !res.startsWith('298')
        && !res.startsWith('679')
        && !res.startsWith('358')
        && !res.startsWith('33')
        && !res.startsWith('689')
        && !res.startsWith('241')
        && !res.startsWith('220')
        && !res.startsWith('995')
        && !res.startsWith('49')
        && !res.startsWith('233')
        && !res.startsWith('350')
        && !res.startsWith('30')
        && !res.startsWith('299')
        && !res.startsWith('1473')
        && !res.startsWith('1671')
        && !res.startsWith('502')
        && !res.startsWith('441481')
        && !res.startsWith('224')
        && !res.startsWith('245')
        && !res.startsWith('592')
        && !res.startsWith('509')
        && !res.startsWith('504')
        && !res.startsWith('852')
        && !res.startsWith('36')
        && !res.startsWith('354')
        && !res.startsWith('91')
        && !res.startsWith('62')
        && !res.startsWith('98')
        && !res.startsWith('964')
        && !res.startsWith('353')
        && !res.startsWith('441624')
        && !res.startsWith('972')
        && !res.startsWith('39')
        && !res.startsWith('225')
        && !res.startsWith('1876')
        && !res.startsWith('81')
        && !res.startsWith('441534')
        && !res.startsWith('962')
        && !res.startsWith('254')
        && !res.startsWith('686')
        && !res.startsWith('383')
        && !res.startsWith('965')
        && !res.startsWith('996')
        && !res.startsWith('856')
        && !res.startsWith('371')
        && !res.startsWith('961')
        && !res.startsWith('266')
        && !res.startsWith('231')
        && !res.startsWith('218')
        && !res.startsWith('423')
        && !res.startsWith('370')
        && !res.startsWith('352')
        && !res.startsWith('853')
        && !res.startsWith('389')
        && !res.startsWith('261')
        && !res.startsWith('265')
        && !res.startsWith('60')
        && !res.startsWith('960')
        && !res.startsWith('223')
        && !res.startsWith('356')
        && !res.startsWith('692')
        && !res.startsWith('222')
        && !res.startsWith('230')
        && !res.startsWith('262')
        && !res.startsWith('52')
        && !res.startsWith('691')
        && !res.startsWith('373')
        && !res.startsWith('377')
        && !res.startsWith('976')
        && !res.startsWith('382')
        && !res.startsWith('1664')
        && !res.startsWith('212')
        && !res.startsWith('258')
        && !res.startsWith('95')
        && !res.startsWith('264')
        && !res.startsWith('674')
        && !res.startsWith('977')
        && !res.startsWith('31')
        && !res.startsWith('599')
        && !res.startsWith('687')
        && !res.startsWith('64')
        && !res.startsWith('505')
        && !res.startsWith('227')
        && !res.startsWith('234')
        && !res.startsWith('683')
        && !res.startsWith('850')
        && !res.startsWith('1670')
        && !res.startsWith('47')
        && !res.startsWith('968')
        && !res.startsWith('680')
        && !res.startsWith('970')
        && !res.startsWith('507')
        && !res.startsWith('675')
        && !res.startsWith('595')
        && !res.startsWith('51')
        && !res.startsWith('63')
        && !res.startsWith('64')
        && !res.startsWith('48')
        && !res.startsWith('351')
        && !res.startsWith('1787')
        && !res.startsWith('1939')
        && !res.startsWith('974')
        && !res.startsWith('242')
        && !res.startsWith('262')
        && !res.startsWith('40')
        && !res.startsWith('7')
        && !res.startsWith('250')
        && !res.startsWith('590')
        && !res.startsWith('290')
        && !res.startsWith('1869')
        && !res.startsWith('1758')
        && !res.startsWith('590')
        && !res.startsWith('508')
        && !res.startsWith('1784')
        && !res.startsWith('685')
        && !res.startsWith('378')
        && !res.startsWith('239')
        && !res.startsWith('966')
        && !res.startsWith('221')
        && !res.startsWith('381')
        && !res.startsWith('248')
        && !res.startsWith('232')
        && !res.startsWith('65')
        && !res.startsWith('1721')
        && !res.startsWith('421')
        && !res.startsWith('386')
        && !res.startsWith('677')
        && !res.startsWith('252')
        && !res.startsWith('27')
        && !res.startsWith('82')
        && !res.startsWith('211')
        && !res.startsWith('34')
        && !res.startsWith('94')
        && !res.startsWith('249')
        && !res.startsWith('597')
        && !res.startsWith('47')
        && !res.startsWith('268')
        && !res.startsWith('46')
        && !res.startsWith('41')
        && !res.startsWith('963')
        && !res.startsWith('886')
        && !res.startsWith('992')
        && !res.startsWith('255')
        && !res.startsWith('66')
        && !res.startsWith('228')
        && !res.startsWith('690')
        && !res.startsWith('676')
        && !res.startsWith('1868')
        && !res.startsWith('216')
        && !res.startsWith('90')
        && !res.startsWith('993')
        && !res.startsWith('1649')
        && !res.startsWith('688')
        && !res.startsWith('1340')
        && !res.startsWith('256')
        && !res.startsWith('380')
        && !res.startsWith('971')
        && !res.startsWith('44')
        && !res.startsWith('1')
        && !res.startsWith('598')
        && !res.startsWith('998')
        && !res.startsWith('678')
        && !res.startsWith('379')
        && !res.startsWith('58')
        && !res.startsWith('84')
        && !res.startsWith('681')
        && !res.startsWith('212')
        && !res.startsWith('967')
        && !res.startsWith('260')
        && !res.startsWith('263')
        && !res.startsWith('92'))
        {
            res = '971' + res
        }
    // console.log("The Contact in the validation function ", res)
    return `${res}@c.us`
}